---
- name: Create volume group
  lvg:
    vg: "{{ drbd_vg_name }}"
    pvs: "{{ drbd_disks }}"

- name: Create volumes
  lvol:
    vg: "{{ drbd_vg_name }}"
    lv: "{{ drbd_lv_name }}"
    size: "{{ drbd_volume_size }}"

- name: Convert volume to thin-pool
  command: "lvconvert --force --type thin-pool -y {{ drbd_vg_name }}/{{ drbd_lv_name }}"
  ignore_errors: yes
